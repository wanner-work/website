---
import { getCollection, render } from 'astro:content'
import Page from '../../components/layout/Page'
import Layout from '../../layouts/Layout.astro'

export async function getStaticPaths() {
  const projects = await getCollection('projects')

  return projects.map((project) => ({
    params: { id: project.id },
    props: { project }
  }))
}

const { project } = Astro.props

if (project === undefined) {
  return Astro.redirect('/404')
}

const { Content } = await render(project)
---

<Layout title="Projekte">
  <Page title={project.data.title} description={project.data.description}>
    <Content />
  </Page>
</Layout>
