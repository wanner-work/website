---
import { getCollection, render } from 'astro:content'
import Page from '../../components/layout/Page'
import Layout from '../../layouts/Layout.astro'
import Container from '@/components/content/Container'

export async function getStaticPaths() {
  const projects = await getCollection('projects', (project) => !project.data.hidden)

  return projects.map((project) => ({
    params: { id: project.id },
    props: { project }
  }))
}

const { project } = Astro.props

if (project === undefined) {
  return Astro.redirect('/404')
}

const { Content } = await render(project)
---

<Layout title={project.data.title + ' - Projekte'}>
  <Page
    title={project.data.title}
    description={project.data.description}
    back="/projects"
  >
    <Container>
      <Content />
    </Container>
  </Page>
</Layout>
