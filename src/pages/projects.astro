---
import { getCollection } from 'astro:content'
import Page from '../components/layout/Page'
import Layout from '../layouts/Layout.astro'
import i18n from '@/methods/i18n/i18n'
import ProjectDisplay from '@/components/pages/projects/ProjectDisplay'
const projects = await getCollection(
  'projects',
  (project) => !project.data.hidden
)

const proj = projects[0]
---

<Layout title={i18n('projects.title')}>
  <Page
    title={i18n('projects.title')}
    description={i18n('projects.description')}
  >
    <ProjectDisplay
      tags={projects
        .flatMap((project) => project.data.tags)
        .filter((tag, index, self) => self.indexOf(tag) === index)}
      projects={projects}
      viewProject={i18n('projects.view')}
      viewExternalProject={i18n('projects.view-external')}
      client:visible
    />
  </Page>
</Layout>
